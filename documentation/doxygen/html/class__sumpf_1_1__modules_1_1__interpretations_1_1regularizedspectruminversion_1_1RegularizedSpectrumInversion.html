<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SuMPF: _sumpf._modules._interpretations.regularizedspectruminversion.RegularizedSpectrumInversion Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SuMPF
   &#160;<span id="projectnumber">0.01</span>
   </div>
   <div id="projectbrief">Sound&nbsp;using&nbsp;a&nbsp;Monkeyforest-like&nbsp;Processing&nbsp;Framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>_sumpf</b></li><li class="navelem"><b>_modules</b></li><li class="navelem"><b>_interpretations</b></li><li class="navelem"><b>regularizedspectruminversion</b></li><li class="navelem"><a class="el" href="class__sumpf_1_1__modules_1_1__interpretations_1_1regularizedspectruminversion_1_1RegularizedSpectrumInversion.html">RegularizedSpectrumInversion</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class__sumpf_1_1__modules_1_1__interpretations_1_1regularizedspectruminversion_1_1RegularizedSpectrumInversion-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">_sumpf._modules._interpretations.regularizedspectruminversion.RegularizedSpectrumInversion Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This is a module that calculates the inverse of a spectrum so it can be used for deconvolution.  
 <a href="class__sumpf_1_1__modules_1_1__interpretations_1_1regularizedspectruminversion_1_1RegularizedSpectrumInversion.html#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for _sumpf._modules._interpretations.regularizedspectruminversion.RegularizedSpectrumInversion:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class__sumpf_1_1__modules_1_1__interpretations_1_1regularizedspectruminversion_1_1RegularizedSpectrumInversion__coll__graph.png" border="0" usemap="#__sumpf_8__modules_8__interpretations_8regularizedspectruminversion_8RegularizedSpectrumInversion_coll__map" alt="Collaboration graph"/></div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:adbc363ec99291219241428b70a96e028"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__sumpf_1_1__modules_1_1__interpretations_1_1regularizedspectruminversion_1_1RegularizedSpectrumInversion.html#adbc363ec99291219241428b70a96e028">__init__</a> (self, spectrum=None, start_frequency=20.0, stop_frequency=20000.0, transition_length=100, epsilon_max=0.1)</td></tr>
<tr class="separator:adbc363ec99291219241428b70a96e028"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a314305febbce58e24b24c06e273e4ef4"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__sumpf_1_1__modules_1_1__interpretations_1_1regularizedspectruminversion_1_1RegularizedSpectrumInversion.html#a314305febbce58e24b24c06e273e4ef4">GetOutput</a> (self)</td></tr>
<tr class="memdesc:a314305febbce58e24b24c06e273e4ef4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates and returns the regularized inversion of the input Spectrum.  <a href="#a314305febbce58e24b24c06e273e4ef4">More...</a><br /></td></tr>
<tr class="separator:a314305febbce58e24b24c06e273e4ef4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27481820c89f139d0a882c3ed63f1f7c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__sumpf_1_1__modules_1_1__interpretations_1_1regularizedspectruminversion_1_1RegularizedSpectrumInversion.html#a27481820c89f139d0a882c3ed63f1f7c">SetSpectrum</a> (self, spectrum)</td></tr>
<tr class="memdesc:a27481820c89f139d0a882c3ed63f1f7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the input spectrum, that shall be inverted.  <a href="#a27481820c89f139d0a882c3ed63f1f7c">More...</a><br /></td></tr>
<tr class="separator:a27481820c89f139d0a882c3ed63f1f7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae320b650e55f2937c1af721dc303e205"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__sumpf_1_1__modules_1_1__interpretations_1_1regularizedspectruminversion_1_1RegularizedSpectrumInversion.html#ae320b650e55f2937c1af721dc303e205">SetStartFrequency</a> (self, frequency)</td></tr>
<tr class="memdesc:ae320b650e55f2937c1af721dc303e205"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the start frequency for the inversion.  <a href="#ae320b650e55f2937c1af721dc303e205">More...</a><br /></td></tr>
<tr class="separator:ae320b650e55f2937c1af721dc303e205"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d047f49005011a16522c122bc3d7226"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__sumpf_1_1__modules_1_1__interpretations_1_1regularizedspectruminversion_1_1RegularizedSpectrumInversion.html#a4d047f49005011a16522c122bc3d7226">SetStopFrequency</a> (self, frequency)</td></tr>
<tr class="memdesc:a4d047f49005011a16522c122bc3d7226"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the stop frequency for the inversion.  <a href="#a4d047f49005011a16522c122bc3d7226">More...</a><br /></td></tr>
<tr class="separator:a4d047f49005011a16522c122bc3d7226"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09fe42faa712b870708e6d6fff4a1401"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__sumpf_1_1__modules_1_1__interpretations_1_1regularizedspectruminversion_1_1RegularizedSpectrumInversion.html#a09fe42faa712b870708e6d6fff4a1401">SetTransitionLength</a> (self, length)</td></tr>
<tr class="memdesc:a09fe42faa712b870708e6d6fff4a1401"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the length of the fade between zero and the non-zero value in the regularization term (That's E in the example from the class description).  <a href="#a09fe42faa712b870708e6d6fff4a1401">More...</a><br /></td></tr>
<tr class="separator:a09fe42faa712b870708e6d6fff4a1401"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3d8db9867d70ccfaafac79174554d11"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__sumpf_1_1__modules_1_1__interpretations_1_1regularizedspectruminversion_1_1RegularizedSpectrumInversion.html#af3d8db9867d70ccfaafac79174554d11">SetEpsilonMax</a> (self, epsilon_max)</td></tr>
<tr class="memdesc:af3d8db9867d70ccfaafac79174554d11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the maximum value of the regularization term (That's E in the example from the class description).  <a href="#af3d8db9867d70ccfaafac79174554d11">More...</a><br /></td></tr>
<tr class="separator:af3d8db9867d70ccfaafac79174554d11"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is a module that calculates the inverse of a spectrum so it can be used for deconvolution. </p>
<p>The regularization becomes necessary, when the spectrum has a very low amplitude at certain frequencies. A deconvolution by dividing by this spectrum would amplify these frequencies massively, which leads to a very noisy impulse response whose plots are hard to interpret. Instead of dividing by the spectrum directly, it might be necessary, to multiply with the regularized inverse of this spectrum. The regularization tries to avoid the massive amplification of certain frequencies.</p>
<p>This implementation is remotely similar to some ideas, that have been described by Ole Kirkeby and Angelo Farina. However I have not spent enough time yet, to work through their papers thoroughly, so this implementation is just a very rough estimation of the brilliant things, they thought of and it still might lack a lot of precision and scientific correctness. As soon as I think, that I've got an idea of what they are doing, I will improve this implementation.</p>
<p>The following is an example to describe how this implementation is working: In this example, a transfer function is measured with a swept sine with a start frequency and a stop frequency. The transfer function shall be calculated by dividing the spectrum of the response signal by the spectrum of the swept sine.</p><ul>
<li>S is the spectrum of the swept sine.</li>
<li>Y is the spectrum of the response signal.</li>
<li>G is the desired transfer function.</li>
<li>S* is the complex conjugate of the swept sine's spectrum. The quotient G = Y / S would show a massive amplification of the noise below the start frequency and above the stop frequency of the swept sine. Instead, this class calculates the quotient T = S* / (S* * S + E). The deconvolution can then be calculated by G = Y * T. E is zero for all frequencies between the start and the stop frequency. So the interesting frequencies are not affected by the regularization. Above and below that, it has a small, but non-zero value, so T does not become excessively large, when S becomes small. This way, the amplification of noise is greatly reduced. As long as S is large compared to E, the errors that are made by the regularization are minimal, even outside the interval of the start and stop frequencies. To avoid jumps in the calculated inverse, E fades between zero and the non-zero value with a hanning window. </li>
</ul>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="adbc363ec99291219241428b70a96e028"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbc363ec99291219241428b70a96e028">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def _sumpf._modules._interpretations.regularizedspectruminversion.RegularizedSpectrumInversion.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>spectrum</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>start_frequency</em> = <code>20.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>stop_frequency</em> = <code>20000.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>transition_length</em> = <code>100</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>epsilon_max</em> = <code>0.1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spectrum</td><td>the input Spectrum, that shall be inverted </td></tr>
    <tr><td class="paramname">start_frequency</td><td>a float in Hz, that defines the low end of the interval that shall not be affected by the regularization </td></tr>
    <tr><td class="paramname">stop_frequency</td><td>a float in Hz, that defines the top end of the interval that shall not be affected by the regularization </td></tr>
    <tr><td class="paramname">transition_length</td><td>an integer number of samples that defines the length of the fade of E between zero and the non-zero value </td></tr>
    <tr><td class="paramname">epsilon_max</td><td>the maximum value for E </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a314305febbce58e24b24c06e273e4ef4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a314305febbce58e24b24c06e273e4ef4">&#9670;&nbsp;</a></span>GetOutput()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def _sumpf._modules._interpretations.regularizedspectruminversion.RegularizedSpectrumInversion.GetOutput </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates and returns the regularized inversion of the input Spectrum. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"></td><td>a Spectrum instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af3d8db9867d70ccfaafac79174554d11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3d8db9867d70ccfaafac79174554d11">&#9670;&nbsp;</a></span>SetEpsilonMax()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def _sumpf._modules._interpretations.regularizedspectruminversion.RegularizedSpectrumInversion.SetEpsilonMax </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>epsilon_max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the maximum value of the regularization term (That's E in the example from the class description). </p>
<p>epsilon_max is a linear floating point value, not a dB value. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">epsilon_max</td><td>a floating point value </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a27481820c89f139d0a882c3ed63f1f7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27481820c89f139d0a882c3ed63f1f7c">&#9670;&nbsp;</a></span>SetSpectrum()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def _sumpf._modules._interpretations.regularizedspectruminversion.RegularizedSpectrumInversion.SetSpectrum </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>spectrum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the input spectrum, that shall be inverted. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spectrum</td><td>a Spectrum instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae320b650e55f2937c1af721dc303e205"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae320b650e55f2937c1af721dc303e205">&#9670;&nbsp;</a></span>SetStartFrequency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def _sumpf._modules._interpretations.regularizedspectruminversion.RegularizedSpectrumInversion.SetStartFrequency </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>frequency</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the start frequency for the inversion. </p>
<p>All frequencies between the start and the stop frequency are not affected by the regularization. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">frequency</td><td>a frequency value in Hz as a float </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4d047f49005011a16522c122bc3d7226"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d047f49005011a16522c122bc3d7226">&#9670;&nbsp;</a></span>SetStopFrequency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def _sumpf._modules._interpretations.regularizedspectruminversion.RegularizedSpectrumInversion.SetStopFrequency </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>frequency</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the stop frequency for the inversion. </p>
<p>All frequencies between the start and the stop frequency are not affected by the regularization. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">frequency</td><td>a frequency value in Hz as a float </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a09fe42faa712b870708e6d6fff4a1401"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09fe42faa712b870708e6d6fff4a1401">&#9670;&nbsp;</a></span>SetTransitionLength()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def _sumpf._modules._interpretations.regularizedspectruminversion.RegularizedSpectrumInversion.SetTransitionLength </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the length of the fade between zero and the non-zero value in the regularization term (That's E in the example from the class description). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">length</td><td>an integer number of samples </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>source/_sumpf/_modules/_interpretations/regularizedspectruminversion.py</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Nov 11 2018 13:23:01 for SuMPF by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
